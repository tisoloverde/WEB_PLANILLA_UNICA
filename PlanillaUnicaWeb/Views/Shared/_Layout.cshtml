@using PlanillaUnicaWeb.Models
@{ var alerts = TempData.ContainsKey(PlanillaUnicaWeb.Models.Alert.AlertKey)
                                         ? (List<PlanillaUnicaWeb.Models.Alert>)TempData[PlanillaUnicaWeb.Models.Alert.AlertKey]
                                            : new List<PlanillaUnicaWeb.Models.Alert>();

    List<Account_Menu_Opcion> menuList = new List<Account_Menu_Opcion>();

    if (!(Session["user_Menus"] == null))
    {
        menuList = Session["user_Menus"] as List<Account_Menu_Opcion>;
    }
    Html.EnableClientValidation(true);
    Html.EnableUnobtrusiveJavaScript(true);

}


<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
    <title>Planilla Única de Asistencia</title>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- BOOTSTRAP PERSONALIZADO -->
    <link rel="stylesheet" href="~/css/personalizados.css">

    <!-- PERSONALIZACION DE ELEMENTOS -->
    <link rel="stylesheet" href="~/css/estilos.css">

    <!-- ICONOS BOOTSTRAPS -->
    <link rel="stylesheet" href="~/css/bootstrap-icons.css">

    <!-- GOOGLE FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;700&family=Roboto:wght@100;300;400;700&display=swap"
          rel="stylesheet">

    <link href="~/Content/loader.css" rel="stylesheet" />
    <link href="~/Content/sweetalert2.css" rel="stylesheet" />

    <!-- JQUERY -->
    <script src="https://code.jquery.com/jquery-3.6.0.js"
            integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="~/Scripts/popper-utils.js"></script>
    <!-- JQUERY VALIDATION-->
    <script src="~/Scripts/jquery.validate.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.js"></script>

    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

    <script src="~/js/validaciones.js"></script>
    <script src="~/js/alerta.js"></script>


    <script src="~/Scripts/app/Comun.js"></script>
    <script src="~/Scripts/app/Util.js"></script>
    <script src="~/Scripts/sweetalert2.js"></script>

    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.4/css/jquery.dataTables.min.css">
    <script src="https://cdn.datatables.net/1.11.4/js/jquery.dataTables.min.js"></script>



    <!-- ANIMACION -->
    <link rel="stylesheet" href="~/css/animations.css" type="text/css">
    <script type="text/javascript">const tlJsHost = ((window.location.protocol == "https:") ? "https://secure.trust-provider.com/" : "http://www.trustlogo.com/"); document.write(unescape("<script src='" + tlJsHost + "trustlogo/javascript/trustlogo.js' type='text/javascript' %3E%3C/script%3E"));</script>


    <link rel="stylesheet" href="https://cdn.datatables.net/2.1.7/css/dataTables.dataTables.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/3.1.2/css/buttons.dataTables.css">
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://cdn.datatables.net/2.1.7/js/dataTables.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.1.2/js/dataTables.buttons.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.1.2/js/buttons.dataTables.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.1.2/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.1.2/js/buttons.print.min.js"></script>


    <!-- GENERA PDF -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- SEPARADOR DE MILES -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autonumeric/4.6.0/autoNumeric.min.js"></script>

</head>

<body>
    <div class="wrapper">

        <div id="loader">
            <div class="modalLoader" aria-hidden="true">
                <div class="d-flex justify-content-center">
                    <div class="lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
                </div>
            </div>
        </div>

        <!-- Sidebar  -->
        @if (!(Session["user_Name"] == null))
        {
            <nav id="sidebar">
                <div class="sidebar-header" style="font-family: Consolas; font-size: x-large;">
                    <img src="~/img/planilla-unica-soloverde-new.png" class="menu-img" alt="" />
                </div>
                <ul class="list-unstyled components">
                    <li class="@(ViewBag.Message2 == "Home" ? "active" : "")">
                        <a href="@Url.Action("Index", "Home")"> <i class="bi bi-house-door-fill mr-3"></i> Inicio</a>
                    </li>

                    @if (menuList.Count > 0)
                    {
                        foreach (var menu in menuList)
                        {
                            if (menu.Accmenopc_Menu_Padre.Equals(0))
                            {

                                <li class="text-light px-3">
                                    <hr />
                                    <div class="w-100" style="border-top: 1px solid rgba(255, 255, 255, 0.2);">
                                        <small class="text-uppercase text-white-25">@menu.Accmenopc_Titulo</small>
                                    </div>
                                </li>
                            }
                            else
                            {
                                <li class="@(ViewBag.Message2 == menu.Accmenopc_Descripcion ? "active" : "")">
                                    <a href="@Url.Action(menu.Accmenopc_Accion, menu.Accmenopc_Controller)"><i class="bi bi-arrow-right-square mr-3"></i> @menu.Accmenopc_Titulo</a>
                                </li>
                            }
                        }
                    }
                </ul>

            </nav>
        }

        <div class="container-fluid px-0" style=" display: flex; flex-wrap: wrap; justify-content: center;">
            <nav style="background: linear-gradient(to left, #21473f, #7eb902, white); box-shadow: 0 6px 8px rgba(0, 0, 0, 0.1); border-bottom-left-radius: 30px; border-bottom-right-radius: 30px; "
                 class="navbar navbar-expand-lg">

                <div class="container-fluid py-3">

                    <button type="button" id="sidebarCollapse" class="btn btn-primary">
                        <i class="bi bi-sliders"></i>
                    </button>
                    <button class="btn btn-dark d-inline-block d-lg-none ml-auto" type="button" data-toggle="collapse"
                            data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                            aria-expanded="false" aria-label="Toggle navigation">
                        <i class="bi bi-list "></i>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="nav navbar-nav ml-auto">
                            @*<li class="nav-item">
                                    <a class="nav-link text-light" href="#">
                                        <i class="bi bi-bell-fill text-light"></i>
                                    </a>
                                </li>*@
                            @if (!(Session["user_Name"] == null))
                            {
                                <li class="nav-item">
                                    <div class="dropdown ">
                                        <a href="#" class="nav-link text-light" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <i class="bi bi-person-circle mr-2"></i> @Session["user_Name"].ToString().Trim() @Session["user_ApellidoPaterno"].ToString().Trim() @Session["user_ApellidoMaterno"].ToString().Trim()
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1">
                                            <a class="dropdown-item" href="#!">@Session["user_Email"].ToString().Trim()</a>
                                            <div class="dropdown-divider"></div>
                                            @Html.ActionLink("Cerrar sesión", "SignOut", "Account", new { area = "" }, new { @class = "dropdown-item" })

                                        </div>
                                    </div>
                                </li>
                            }
                        </ul>
                    </div>
                </div>
            </nav>

            <!-- Contenido  -->
            <div id="content">

                @RenderBody()

            </div>
        </div>
    </div>

    <!-- POPPER -->
    <script src="~/js/popper.min.js"></script>
    <!-- BOOTSTRAP -->
    <script src="~/js/bootstrap.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            hiddenLoading();
            $('#sidebarCollapse').on('click', function () {
                $('#sidebar').toggleClass('active');
            });
        });

        $(document).ready(function () {
            var cambio = false;
            $('.nav li a').each(function (index) {
                if (this.href.trim() == window.location) {
                    $(this).parent().addClass("active");
                    $(this).closest('.dropdown').addClass("active");
                    cambio = true;
                }
            });
            if (!cambio) {
                $('.nav li:first').addClass("active");
            }
        });

        $('.collapse').on('shown.bs.collapse', function () {
            $(this).parent().find(".bi-caret-left-fill").removeClass("bi-caret-left-fill").addClass("bi-caret-down-fill");
        }).on('hidden.bs.collapse', function () {
            $(this).parent().find(".bi-caret-down-fill").removeClass("bi-caret-down-fill").addClass("bi-caret-left-fill");
        });

        function showLoading() {
            $('#loader').show();
        }

        function hiddenLoading() {
            $('#loader').hide();
        }

        function simpleAlert(titulo, mensaje, tipo) {
            Swal.fire({
                icon: tipo,
                title: titulo,
                text: mensaje,
                confirmButtonText: 'Aceptar',
                confirmButtonColor: '#e60012',
            })
        }

    </script>
</body>
</html>


